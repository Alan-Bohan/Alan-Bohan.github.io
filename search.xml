<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>使用sparkSQL进行数据分析并使用echart画图</title>
      <link href="/2019/06/01/%E4%BD%BF%E7%94%A8sparkSQL%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%B9%B6%E4%BD%BF%E7%94%A8echart%E7%94%BB%E5%9B%BE/"/>
      <url>/2019/06/01/%E4%BD%BF%E7%94%A8sparkSQL%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%B9%B6%E4%BD%BF%E7%94%A8echart%E7%94%BB%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h3 id="使用sparkSQL进行数据分析并使用echart画图使用sparkSQL进行数据分析并使用echart画图"><a href="#使用sparkSQL进行数据分析并使用echart画图使用sparkSQL进行数据分析并使用echart画图" class="headerlink" title="使用sparkSQL进行数据分析并使用echart画图使用sparkSQL进行数据分析并使用echart画图"></a>使用sparkSQL进行数据分析并使用echart画图使用sparkSQL进行数据分析并使用echart画图</h3><p>刚学了一些大数据的基础知识，老师留了一个小实验，用sparkSql或mapreduce分析数据，然后在进行数据可视化。因为sparkSql可以使用sql语句查询，所以采取的sparksql进行数据分析。</p><p>下面就记录一些操作</p><a id="more"></a><h5 id="实验要求："><a href="#实验要求：" class="headerlink" title="实验要求："></a>实验要求：</h5><p>老师给的5000条数据，格式是这样的</p><p><a href="https://i.loli.net/2019/06/03/5cf4fbd6b7fa986536.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/03/5cf4fbd6b7fa986536.png" alt="实验要求.png"></a></p><p>- 分析发布公司最多的Top 10 公司名称及发布职位数量【饼状图展示】</p><p>- 分析招聘职位最多的Top5 职位名称及数量【柱状图展示】</p><p>- 分析工资最高的职位Top3 职位名称及工资【折线图展示】</p><h5 id="前提条件："><a href="#前提条件：" class="headerlink" title="前提条件："></a>前提条件：</h5><p>在idea中配置好hadoop、scala和spark环境</p><p>配置好环境之后就可以开始写代码了</p><h4 id="一、用sparkSQL分析数据"><a href="#一、用sparkSQL分析数据" class="headerlink" title="一、用sparkSQL分析数据"></a>一、用sparkSQL分析数据</h4><h5 id="1、新建一个scala-object"><a href="#1、新建一个scala-object" class="headerlink" title="1、新建一个scala object"></a>1、新建一个scala object</h5><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.<span class="type">LongWritable</span></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapred.<span class="type">TextInputFormat</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.&#123;<span class="type">DataTypes</span>, <span class="type">StructField</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.&#123;<span class="type">Row</span>, <span class="type">SQLContext</span>, <span class="type">SparkSession</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ArrayBuffer</span></span><br><span class="line"><span class="keyword">import</span> scala.xml.<span class="type">Text</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">DataAnalysis</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">"local[*]"</span>).setAppName(<span class="string">"dataFrameTest"</span>)</span><br><span class="line">      .set(<span class="string">"spark.port.maxRetries"</span>,<span class="string">"1000"</span>);</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line">    <span class="keyword">val</span> spark = <span class="type">SparkSession</span>.builder().config(conf).getOrCreate()</span><br><span class="line">    <span class="keyword">import</span> spark.implicits._</span><br><span class="line">    <span class="keyword">val</span> data = spark.read</span><br><span class="line">      .format(<span class="string">"com.databricks.spark.csv"</span>)</span><br><span class="line">      .option(<span class="string">"inferSchema"</span>, <span class="string">"true"</span>)</span><br><span class="line">      .option(<span class="string">"header"</span>, <span class="string">"true"</span>) <span class="comment">//reading the headers</span></span><br><span class="line">      .option(<span class="string">"mode"</span>, <span class="string">"DROPMALFORMED"</span>)</span><br><span class="line">      .option(<span class="string">"nullValue"</span>, <span class="string">"?"</span>)</span><br><span class="line">      .csv(<span class="string">"c:\\51Job_python_5000.txt"</span>);</span><br><span class="line">    data.show()</span><br><span class="line">    <span class="keyword">val</span> dataDF = data.toDF(<span class="string">"work"</span>,<span class="string">"company"</span>,<span class="string">"add"</span>,<span class="string">"salary"</span>,<span class="string">"date"</span>)</span><br><span class="line">    <span class="keyword">val</span> dataDF2 = dataDF.filter(<span class="string">"work != '' and company != '' and add != '' and salary != '' and date != ''"</span>)</span><br><span class="line">    <span class="comment">//dataDF.show()</span></span><br><span class="line">    <span class="comment">//dataDF2.show()</span></span><br><span class="line">    <span class="keyword">val</span> message = dataDF2.createOrReplaceTempView(<span class="string">"message"</span>)</span><br><span class="line">    <span class="comment">//第一题答案</span></span><br><span class="line">    <span class="keyword">val</span> resdata = spark.sql(<span class="string">"select count(*) num,company FROM message group by company"</span>).registerTempTable(<span class="string">"q1temp"</span>)</span><br><span class="line">    <span class="keyword">val</span> resdata2 = spark.sql(<span class="string">"select num,company from (select num,company,row_number() OVER(ORDER BY num DESC) rank from q1temp) tmp where rank &lt;= 10"</span>)</span><br><span class="line">    resdata2.show()</span><br><span class="line">    <span class="comment">//第二题答案</span></span><br><span class="line">    <span class="keyword">val</span> resdata3 = spark.sql(<span class="string">"select count(*) num,work FROM message group by work"</span>)</span><br><span class="line">    resdata3.show()</span><br><span class="line">    resdata3.registerTempTable(<span class="string">"q2temp"</span>)</span><br><span class="line">    <span class="keyword">val</span> resdata4 = spark.sql(<span class="string">"select num,work from (select num,work,row_number() OVER(ORDER BY num DESC) rank from q2temp) tmp where rank &lt;= 5"</span>)</span><br><span class="line">    resdata4.show()</span><br><span class="line">    <span class="comment">//第三题答案</span></span><br><span class="line">    <span class="keyword">val</span> resdata5 = spark.sql(<span class="string">""</span><span class="string">" select work,company,salary,</span></span><br><span class="line"><span class="string">      (CASE</span></span><br><span class="line"><span class="string">      WHEN salary like '%千/月%' then translate(split(salary,'[-/]')[1],'千','')*1000</span></span><br><span class="line"><span class="string">      when salary like '%万/月%' then translate(split(salary,'[-/]')[1],'万','')*10000</span></span><br><span class="line"><span class="string">      when salary like '%万/年%' then round(translate(split(salary,'[-/]')[1],'万','')*10000/12)</span></span><br><span class="line"><span class="string">      else 0 end) new_salary from message "</span><span class="string">""</span>).registerTempTable(<span class="string">"q3temp"</span>)</span><br><span class="line">    <span class="keyword">val</span> resdata6 = spark.sql(<span class="string">"select work,company,salary,new_salary from (select work,company,salary,new_salary,row_number() OVER(ORDER BY new_salary DESC) rank from q3temp ) tmp where rank &lt;= 3"</span>)</span><br><span class="line">    resdata6.show()</span><br><span class="line"></span><br><span class="line">    resdata2.write.json(<span class="string">"C://result/res1"</span>)</span><br><span class="line">    resdata4.write.json(<span class="string">"C://result/res2"</span>)</span><br><span class="line">    resdata6.write.json(<span class="string">"C://result/res3"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>总结一些点：</p><p>（1）读取csv文件中文乱码</p><p>解决办法：我是直接把csv文件的内容复制出来放到一个txt里面保存成utf-8格式，之后直接读取.txt。因为csv就是用逗号分隔的格式虽然后缀是txt但保留了csv格式的内容，所以可以使用.csv()方法读取</p><p>（2）第一题把resdata和resdata2写成一条语句错误，我也不知道为啥</p><p>解决办法：我把它分成两条语句用registerTempTable生成了一个临时表就好使了</p><p>（3）row_number() OVER(ORDER BY num DESC)内置函数</p><p>语法格式：row_number() over(partition by 分组列 order by 排序列 desc)</p><p>over()里头可以分组以及排序，因为我需要按照num小到大所以没写分组</p><p>（4）write.json()输出的json文件</p><h5 id="2、运行这个scala-object"><a href="#2、运行这个scala-object" class="headerlink" title="2、运行这个scala object"></a>2、运行这个scala object</h5><p>执行之后会生成json文件</p><h4 id="二、用echart画图"><a href="#二、用echart画图" class="headerlink" title="二、用echart画图"></a>二、用echart画图</h4><h5 id="1、把输出的json文件导入到Java-web工程的web下边"><a href="#1、把输出的json文件导入到Java-web工程的web下边" class="headerlink" title="1、把输出的json文件导入到Java web工程的web下边"></a>1、把输出的json文件导入到Java web工程的web下边</h5><h5 id="2、修改一下json文件的格式"><a href="#2、修改一下json文件的格式" class="headerlink" title="2、修改一下json文件的格式"></a>2、修改一下json文件的格式</h5><p>用spark输出的json文件格式不太对，在后面读取会有问题，所以修改一下，输出的三个文件都修改</p><p>修改前：<br><a href="https://i.loli.net/2019/06/03/5cf4fbd33ac8c49482.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/03/5cf4fbd33ac8c49482.png" alt="spark输出的json格式.png"></a></p><p>修改后：<br><a href="https://i.loli.net/2019/06/03/5cf4fbd35ea9b45229.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/03/5cf4fbd35ea9b45229.png" alt="修改后的josn格式.png"></a></p><h5 id="3、新建jsp用echart画图"><a href="#3、新建jsp用echart画图" class="headerlink" title="3、新建jsp用echart画图"></a>3、新建jsp用echart画图</h5><p>直接贴代码</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src="/js/jquery.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src="/js/echarts.min.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;input type=<span class="string">"button"</span> id=<span class="string">"btn1"</span> value=<span class="string">"显示第一题结果图"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"button"</span> id=<span class="string">"btn2"</span> value=<span class="string">"显示第二题结果图"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"button"</span> id=<span class="string">"btn3"</span> value=<span class="string">"显示第三题结果图"</span>&gt;</span><br><span class="line">    &lt;div id="main1" style="width: 1000px;height: 500px;background-color: azure"&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id="main2" style="width: 1000px;height: 500px;background-color: azure"&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id="main3" style="width: 1000px;height: 500px;background-color: azure"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> q1Data = [];</span><br><span class="line">    <span class="keyword">var</span> q1Company = [];</span><br><span class="line">     $(function () &#123;</span><br><span class="line">            <span class="comment">// 异步加载数据</span></span><br><span class="line">         $(<span class="string">'#btn1'</span>).click(function () &#123;</span><br><span class="line">             q1Data = [];</span><br><span class="line">             q1Company = [];</span><br><span class="line">            $.getJSON(<span class="string">"part1.json"</span>,<span class="string">""</span>,function (data) &#123;</span><br><span class="line">                $.each(data,function (i, v) &#123;</span><br><span class="line">                    q1Data.push(&#123;</span><br><span class="line">                        name: v.company,</span><br><span class="line">                        value: v.num</span><br><span class="line">                    &#125;);</span><br><span class="line">                    q1Company.push(v.company)</span><br><span class="line">                &#125;)</span><br><span class="line">                console.info(q1Company)</span><br><span class="line">                console.info(q1Data)</span><br><span class="line">                getChart()</span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;)</span><br><span class="line">         $(<span class="string">'#btn2'</span>).click(function () &#123;</span><br><span class="line">             q2Work = [];</span><br><span class="line">             q2Num = [];</span><br><span class="line">             $.getJSON(<span class="string">"part2.json"</span>,<span class="string">""</span>,function (data) &#123;</span><br><span class="line">                 $.each(data,function (i, v) &#123;</span><br><span class="line">                     q2Work.push(v.work);</span><br><span class="line">                     q2Num.push(v.num)</span><br><span class="line">                 &#125;)</span><br><span class="line">                 console.info(q2Work)</span><br><span class="line">                 console.info(q2Num)</span><br><span class="line">                 getChart2()</span><br><span class="line">             &#125;);</span><br><span class="line">         &#125;)</span><br><span class="line">         $(<span class="string">'#btn3'</span>).click(function () &#123;</span><br><span class="line">             q3Work = [];</span><br><span class="line">             q3Salary = [];</span><br><span class="line">             $.getJSON(<span class="string">"part3.json"</span>,<span class="string">""</span>,function (data) &#123;</span><br><span class="line">                 $.each(data,function (i, v) &#123;</span><br><span class="line">                     q3Work.push(v.work);</span><br><span class="line">                     q3Salary.push(v.new_salary)</span><br><span class="line">                 &#125;)</span><br><span class="line">                 console.info(q3Work)</span><br><span class="line">                 console.info(q3Salary)</span><br><span class="line">                 getChart3()</span><br><span class="line">             &#125;);</span><br><span class="line">         &#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">     <span class="function">function <span class="title">getChart</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> myChart = echarts.init(document.getElementById(<span class="string">'main1'</span>));</span><br><span class="line">        <span class="comment">// 显示标题，图例和空的坐标轴</span></span><br><span class="line">        myChart.setOption(&#123;</span><br><span class="line">            title : &#123;</span><br><span class="line">                text: <span class="string">'发布公司最多的Top 10'</span>,</span><br><span class="line">                subtext: <span class="string">'发布公司最多的Top 10'</span>,</span><br><span class="line">                x:<span class="string">'center'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            tooltip: &#123;</span><br><span class="line">                trigger: <span class="string">'item'</span>,</span><br><span class="line">                formatter: <span class="string">"&#123;a&#125; &lt;br/&gt;&#123;b&#125;: &#123;c&#125; (&#123;d&#125;%)"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            legend: &#123;</span><br><span class="line">                orient: <span class="string">'vertical'</span>,</span><br><span class="line">                x: <span class="string">'left'</span>,</span><br><span class="line">                data: q1Company</span><br><span class="line">            &#125;,</span><br><span class="line">            series: [</span><br><span class="line">                &#123;</span><br><span class="line">                    name:<span class="string">'来源虚构'</span>,</span><br><span class="line">                    type:<span class="string">'pie'</span>,</span><br><span class="line">                    radius: [<span class="string">'50%'</span>, <span class="string">'70%'</span>],</span><br><span class="line">                    avoidLabelOverlap: <span class="keyword">false</span>,</span><br><span class="line">                    label: &#123;</span><br><span class="line">                        normal: &#123;</span><br><span class="line">                            show: <span class="keyword">false</span>,</span><br><span class="line">                            position: <span class="string">'center'</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        emphasis: &#123;</span><br><span class="line">                            show: <span class="keyword">true</span>,</span><br><span class="line">                            textStyle: &#123;</span><br><span class="line">                                fontSize: <span class="string">'30'</span>,</span><br><span class="line">                                fontWeight: <span class="string">'bold'</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    labelLine: &#123;</span><br><span class="line">                        normal: &#123;</span><br><span class="line">                            show: <span class="keyword">false</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    data:q1Data</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">function <span class="title">getChart2</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> myChart = echarts.init(document.getElementById(<span class="string">'main2'</span>));</span><br><span class="line">        <span class="comment">// 显示标题，图例和空的坐标轴</span></span><br><span class="line">        myChart.setOption(&#123;</span><br><span class="line">            title : &#123;</span><br><span class="line">                text: <span class="string">'招聘职位最多的Top5'</span>,</span><br><span class="line">                subtext: <span class="string">'招聘职位最多的Top5'</span>,</span><br><span class="line">                x:<span class="string">'center'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            color: [<span class="string">'#3398DB'</span>],</span><br><span class="line">            tooltip : &#123;</span><br><span class="line">                trigger: <span class="string">'axis'</span>,</span><br><span class="line">                axisPointer : &#123;            <span class="comment">// 坐标轴指示器，坐标轴触发有效</span></span><br><span class="line">                    type : <span class="string">'shadow'</span>        <span class="comment">// 默认为直线，可选为：'line' | 'shadow'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            grid: &#123;</span><br><span class="line">                left: <span class="string">'3%'</span>,</span><br><span class="line">                right: <span class="string">'4%'</span>,</span><br><span class="line">                bottom: <span class="string">'3%'</span>,</span><br><span class="line">                containLabel: <span class="keyword">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            xAxis : [</span><br><span class="line">                &#123;</span><br><span class="line">                    type : <span class="string">'category'</span>,</span><br><span class="line">                    data : q2Work,</span><br><span class="line">                    axisTick: &#123;</span><br><span class="line">                        alignWithLabel: <span class="keyword">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            yAxis : [</span><br><span class="line">                &#123;</span><br><span class="line">                    type : <span class="string">'value'</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            series : [</span><br><span class="line">                &#123;</span><br><span class="line">                    name:<span class="string">'来源虚构'</span>,</span><br><span class="line">                    type:<span class="string">'bar'</span>,</span><br><span class="line">                    barWidth: <span class="string">'60%'</span>,</span><br><span class="line">                    data:q2Num</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">function <span class="title">getChart3</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> myChart = echarts.init(document.getElementById(<span class="string">'main3'</span>));</span><br><span class="line">        <span class="comment">// 显示标题，图例和空的坐标轴</span></span><br><span class="line">        myChart.setOption(&#123;</span><br><span class="line">            title : &#123;</span><br><span class="line">                text: <span class="string">'工资最高的职位Top3'</span>,</span><br><span class="line">                subtext: <span class="string">'工资最高的职位Top3'</span>,</span><br><span class="line">                x:<span class="string">'center'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            xAxis: &#123;</span><br><span class="line">                type: <span class="string">'category'</span>,</span><br><span class="line">                data: q3Work</span><br><span class="line">            &#125;,</span><br><span class="line">            yAxis: &#123;</span><br><span class="line">                type: <span class="string">'value'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            series: [&#123;</span><br><span class="line">                data: q3Salary,</span><br><span class="line">                type: <span class="string">'line'</span>,</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h5 id="4、效果图"><a href="#4、效果图" class="headerlink" title="4、效果图"></a>4、效果图</h5><p><a href="https://i.loli.net/2019/06/03/5cf4fbd4361dd63198.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/03/5cf4fbd4361dd63198.png" alt="结果1.png"></a></p><p><a href="https://i.loli.net/2019/06/03/5cf4fbd35ee1410067.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/03/5cf4fbd35ee1410067.png" alt="结果2.png"></a></p><p><a href="https://i.loli.net/2019/06/03/5cf4fbd35e3f265196.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/03/5cf4fbd35e3f265196.png" alt="结果3.png"></a></p><p>总结几点：</p><p>1、填入数据时注意，echart的饼状图需要的数据形式是</p><p><code>name：xxx  value：xxx</code></p><p>填入数据用这样的方式</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">q1Data.push(&#123;</span><br><span class="line">               name: v.company,</span><br><span class="line">               value: v.num</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>2、定义div的时候给一个长宽大小，echart渲染才能显示出来</p>]]></content>
      
      
      <categories>
          
          <category> spark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spark </tag>
            
            <tag> sparkSQL </tag>
            
            <tag> echart.js </tag>
            
            <tag> 大数据 </tag>
            
            <tag> 数据分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>d3.js学习记录</title>
      <link href="/2019/05/23/d3-js%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
      <url>/2019/05/23/d3-js%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>今天上课简单学习了一下d3.js，在这简单记录一下学习过程</p><p>d3是用来进行数据可视化的一个javascript函数库。这是d3的官网<a href="https://d3js.org/" target="_blank" rel="noopener">https://d3js.org/</a></p><p>可以到这下载d3.js</p><a id="more"></a><h3 id="1-选择元素"><a href="#1-选择元素" class="headerlink" title="1.选择元素"></a>1.选择元素</h3><p>使用d3选择元素和jqery有点像，使用select()选择符合的第一个元素，selectAll()选择所有符合的元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/d3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">d3.select("body").selectAll("p").text("i love china")</span></span><br><span class="line"><span class="undefined">var p = d3.select("body").select("p").text("i am hero")</span></span><br><span class="line"><span class="undefined">p.style("font-size","50px").style("color","red")</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>运行截图：<br><a href="https://i.loli.net/2019/05/23/5ce68e25b891e50058.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/05/23/5ce68e25b891e50058.png" alt="1558603415703.png"></a></p></blockquote><h3 id="2-绑定数据"><a href="#2-绑定数据" class="headerlink" title="2.绑定数据"></a>2.绑定数据</h3><p>datum()不能针对数组绑定，data()可以针对数组绑定</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>dog<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>cat<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>pig<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/d3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var str = "china"</span></span><br><span class="line"><span class="undefined">//数据集合</span></span><br><span class="line"><span class="undefined">var dataset = ["123","456","789"];</span></span><br><span class="line"><span class="undefined">var Allp = d3.select('body').selectAll('p');</span></span><br><span class="line"><span class="undefined">//datum(str)参数d:绑定的数据内容，参数i：操作第几个元素</span></span><br><span class="line"><span class="undefined">Allp.datum(str).text(function(d,i)&#123;</span></span><br><span class="line"><span class="undefined">return '第'+(i+1)+'个元素绑定的数据是'+str;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">//data(dataset)参数d:绑定的数据内容，参数i：操作第几个元素</span></span><br><span class="line"><span class="undefined">Allp.data(dataset).text(function(d,i)&#123;</span></span><br><span class="line"><span class="undefined">return d</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>运行截图：<br><a href="https://i.loli.net/2019/05/23/5ce68e2599e0578776.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/05/23/5ce68e2599e0578776.png" alt="1558609870054.png"></a></p></blockquote><h3 id="3-插入元素"><a href="#3-插入元素" class="headerlink" title="3.插入元素"></a>3.插入元素</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>666<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"myid"</span>&gt;</span>myid<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"myclass"</span>&gt;</span>myclass1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"myclass"</span>&gt;</span>myclass2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/d3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var p = d3.select("body").select("#myid");</span></span><br><span class="line"><span class="undefined">p.style("color","red")</span></span><br><span class="line"><span class="undefined">d3.select("body").selectAll(".myclass").style("color","blue")</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">d3.select("body").append("p").text("你是真滴秀").style("color","red")</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">d3.select("body").insert("p","#myid").text("i like cat")</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">d3.select("#myid").remove()</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>运行截图：</p><p><a href="https://i.loli.net/2019/05/23/5ce68e2599eb788718.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/05/23/5ce68e2599eb788718.png" alt="1558610294675.png"></a>]</p></blockquote><h3 id="4-SVG图表"><a href="#4-SVG图表" class="headerlink" title="4.SVG图表"></a>4.SVG图表</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/d3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var width = 300;</span></span><br><span class="line"><span class="undefined">var height = 300;</span></span><br><span class="line"><span class="undefined">var svg = d3.select("body")</span></span><br><span class="line"><span class="undefined">.append("svg")</span></span><br><span class="line"><span class="undefined">.attr("width",width)</span></span><br><span class="line"><span class="undefined">.attr("height",height)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var dataset = [10,20,30,40,50];</span></span><br><span class="line"><span class="undefined">var rectHeight = 25;//每个矩形所占的像素高</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">svg.selectAll("rect")</span></span><br><span class="line"><span class="undefined">.data(dataset)</span></span><br><span class="line"><span class="undefined">.enter()</span></span><br><span class="line"><span class="undefined">.append("rect")</span></span><br><span class="line"><span class="undefined">.attr("x",20)</span></span><br><span class="line"><span class="undefined">//每次都是从左上角那个点开始，所以要动态变化i</span></span><br><span class="line"><span class="undefined">.attr("y",function(d,i)&#123;</span></span><br><span class="line"><span class="undefined">return i * rectHeight</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">.attr("width",function(d,i)&#123;</span></span><br><span class="line"><span class="undefined">return d</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">.attr("height",23)</span></span><br><span class="line"><span class="undefined">.attr("fill","steelblue")</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>运行截图：</p><p><a href="https://i.loli.net/2019/05/23/5ce68e25b3e7f59991.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/05/23/5ce68e25b3e7f59991.png" alt="1558610456612.png"></a></p></blockquote><h3 id="5-比例尺"><a href="#5-比例尺" class="headerlink" title="5.比例尺"></a>5.比例尺</h3><p>比例尺可以做到相对的显示数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/d3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var dataset= [1.2,2.3,5.2,1.5,3.3]</span></span><br><span class="line"><span class="undefined">var min = d3.min(dataset)</span></span><br><span class="line"><span class="undefined">var max = d3.max(dataset)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">//linear就是比例尺</span></span><br><span class="line"><span class="undefined">var linear = d3.scale.linear()</span></span><br><span class="line"><span class="undefined">.domain([0,max])</span></span><br><span class="line"><span class="undefined">.range([0,300])</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var width = 300;</span></span><br><span class="line"><span class="undefined">var height = 300;</span></span><br><span class="line"><span class="undefined">var svg = d3.select("body")</span></span><br><span class="line"><span class="undefined">.append("svg")</span></span><br><span class="line"><span class="undefined">.attr("width",width)</span></span><br><span class="line"><span class="undefined">.attr("height",height)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var rectHeight = 25;//每个矩形所占的像素高</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">svg.selectAll("rect")</span></span><br><span class="line"><span class="undefined">.data(dataset)</span></span><br><span class="line"><span class="undefined">.enter()</span></span><br><span class="line"><span class="undefined">.append("rect")</span></span><br><span class="line"><span class="undefined">.attr("x",20)</span></span><br><span class="line"><span class="undefined">//每次都是从左上角那个点开始，所以要动态变化i</span></span><br><span class="line"><span class="undefined">.attr("y",function(d,i)&#123;</span></span><br><span class="line"><span class="undefined">return i * rectHeight</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">.attr("width",function(d,i)&#123;</span></span><br><span class="line"><span class="undefined">return linear(d)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">.attr("height",23)</span></span><br><span class="line"><span class="undefined">.attr("fill","steelblue")</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>运行截图：</p><p><a href="https://i.loli.net/2019/05/23/5ce68e25b2be520573.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/05/23/5ce68e25b2be520573.png" alt="1558610677814.png"></a></p></blockquote><h3 id="6-坐标轴"><a href="#6-坐标轴" class="headerlink" title="6.坐标轴"></a>6.坐标轴</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">.axis path,</span></span><br><span class="line"><span class="undefined">.axis line&#123;</span></span><br><span class="line"><span class="undefined">    fill: none;</span></span><br><span class="line"><span class="undefined">    stroke: black;</span></span><br><span class="line"><span class="undefined">    shape-rendering: crispEdges;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">.axis text &#123;</span></span><br><span class="line"><span class="undefined">    font-family: sans-serif;</span></span><br><span class="line"><span class="undefined">    font-size: 15px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/d3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var width = 300;</span></span><br><span class="line"><span class="undefined">var dataset= [1.2,2.3,3.9,1.5,3.3]</span></span><br><span class="line"><span class="undefined">var min = d3.min(dataset)</span></span><br><span class="line"><span class="undefined">var max = d3.max(dataset)</span></span><br><span class="line"><span class="undefined">var linear = d3.scale.linear()</span></span><br><span class="line"><span class="undefined">.domain([0,max])</span></span><br><span class="line"><span class="undefined">.range([0,300])</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">//坐标轴</span></span><br><span class="line"><span class="undefined">var axis = d3.svg.axis()</span></span><br><span class="line"><span class="undefined">     .scale(linear)      //指定比例尺</span></span><br><span class="line"><span class="undefined">     .orient("bottom")   //指定刻度的方向</span></span><br><span class="line"><span class="undefined">     .ticks(8);          //指定刻度的数量</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var width = 300;</span></span><br><span class="line"><span class="undefined">var height = 300;</span></span><br><span class="line"><span class="undefined">var svg = d3.select("body")</span></span><br><span class="line"><span class="undefined">.append("svg")</span></span><br><span class="line"><span class="undefined">.attr("width",width)</span></span><br><span class="line"><span class="undefined">.attr("height",height)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">//添加坐标轴transform属性可以调整位置translate(20,130)x，y</span></span><br><span class="line"><span class="undefined">//.call()</span></span><br><span class="line"><span class="undefined">svg.append("g")</span></span><br><span class="line"><span class="undefined">  .attr("class","axis")</span></span><br><span class="line"><span class="undefined">  .attr("transform","translate(20,130)")</span></span><br><span class="line"><span class="undefined">  .call(axis);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var rectHeight = 25;//每个矩形所占的像素高</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">svg.selectAll("rect")</span></span><br><span class="line"><span class="undefined">.data(dataset)</span></span><br><span class="line"><span class="undefined">.enter()</span></span><br><span class="line"><span class="undefined">.append("rect")</span></span><br><span class="line"><span class="undefined">.attr("x",20)</span></span><br><span class="line"><span class="undefined">//每次都是从左上角那个点开始，所以要动态变化i</span></span><br><span class="line"><span class="undefined">.attr("y",function(d,i)&#123;</span></span><br><span class="line"><span class="undefined">return i * rectHeight</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">.attr("width",function(d,i)&#123;</span></span><br><span class="line"><span class="undefined">return linear(d)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">.attr("height",23)</span></span><br><span class="line"><span class="undefined">.attr("fill","steelblue")</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>运行截图：</p><p><a href="https://i.loli.net/2019/05/23/5ce68e25b3b4d16479.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/05/23/5ce68e25b3b4d16479.png" alt="1558610919649.png"></a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 数据可视化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> d3.js数据可视化 </tag>
            
            <tag> 数据可视化 </tag>
            
            <tag> d3.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建hexo博客部署到github和coding</title>
      <link href="/2019/05/19/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0github%E5%92%8Ccoding/"/>
      <url>/2019/05/19/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0github%E5%92%8Ccoding/</url>
      
        <content type="html"><![CDATA[<p>昨天在b站看到了一些关于如何搭建自己博客的视频。出于兴趣，决定动手搭一下。搭建期间也遇到了不少坑。搭完博客正好发布第一篇文章，就在这和大家分享一下搭建的过程。</p><fancybox><br><a href="https://i.loli.net/2019/05/23/5ce63dfa3b27d51238.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/05/23/5ce63dfa3b27d51238.png" alt="01-1.png"></a><br></fancybox><br><a id="more"></a><br><br>## 一、准备工作<br><br> - 安装git：<br> 下载地址： <a href="https://git-scm.com/download" target="_blank" rel="noopener">git下载页面</a><br> 选择符合自己系统的版本下载<br> 默认点击下一步完成安装<br> - 安装node.js：<br> 下载地址：<a href="http://nodejs.cn/download/" target="_blank" rel="noopener">node.js下载页面</a><br> 选择符合自己系统的版本下载<br> 默认点击下一步完成安装<br> - 安装hexo<br> 安装hexo需要使用命令行安装<br> 打开刚安装好的git bash<br> <fancybox><br> <img src="https://img-blog.csdnimg.cn/20190519132711675.png" alt="安装的git"><br> </fancybox><br> 输入下面的命令进行安装<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure><br><br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519133259114.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>此时可以看一下安装的hexo版本<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo -v</span><br></pre></td></tr></table></figure><br><br>## 二、初始化博客<br> cd进入你想要创建博客的位置，xxx代表创建的博客文件夹叫什么名字，比如我是<code>cd /c/blog</code>在c盘的blog文件夹里面<code>hexo init DBHblog</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init xxx</span><br></pre></td></tr></table></figure><br><br>这时会生成一个xxx文件夹，这个文件夹就是初始化好的你的博客目录<br>此时我们需要cd进入这个文件夹<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd xxx</span><br><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><br><br>执行完命令之后，在博客目录下会产生一个public文件夹，这里面存放的就是博客静态文件。<br><br>tip：<code>hexo g是hexo generate的缩写</code> 输入缩写也可以<br><br>## 三、本地部署<br><br>此时我们可以测试一下博客是否搭建成功<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><br><br>tip：<code>hexo s 是hexo server的缩写</code><br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519143434409.png" alt="在这里插入图片描述"><br></fancybox><br>之后我们可以到浏览器里面输入<code>http://localhost:4000</code>测试<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519143719730.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>这说明我们成功创建了博客，但是别人访问不了，所以我们还需要把博客部署到服务器上，别人才能访问<br><br>## 四、部署到github和coding<br><br>github和coding都给注册用户提供了一个服务器，所以我们将博客部署到这两个服务器上去<br><br>coding的好处就是国内服务器比github访问快<br><br>我最开始也是发现github加载有点慢= =，之后就又部署到了coding<br><br>#### 1.部署到github<br><br>（1）首先要去<a href="https://github.com注册一个账号然后登陆" target="_blank" rel="noopener">https://github.com注册一个账号然后登陆</a><br><br>（2）新建一个repository（仓库）<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519144851572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>（3）<strong>输入项目名称！！！注意仓库名称必须是:<code>你的github用户名.github.io</code>这个格式</strong><br><br><code>你的github用户名.github.io</code> 是你的博客网址，别人可以通过这个网址访问你的博客<br><br>若仓库名称不是的话会出现你404错误<br><fancybox><br><img src="https://img-blog.csdnimg.cn/2019051917595834.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>（4）这是git官网上说的，所以去Git bash里面执行这两句<br><br>改成 <code>你的github用户名</code> 和 <code>注册时验证的邮箱</code><br><br><blockquote><p>当安装完 Git 应该做的第一件事就是设置你的用户名称与邮件地址。 这样做很重要，因为每一个 Git 的提交都会使用这些信息，并且它会写入到你的每一次提交中，不可更改：</p><p><code>$ git config --global user.name &quot;John Doe&quot;</code><br><code>$ git config --global user.email johndoe@example.com</code></p><p>再次强调，如果使用了 <code>--global</code> 选项，那么该命令只需要运行一次，因为之后无论你在该系统上做任何事情， Git 都会使用那些信息。 当你想针对特定项目使用不同的用户名称与邮件地址时，可以在那个项目目录下运行没有 <code>--global</code> 选项的命令来配置。</p></blockquote><br><br>然后接着生成ssh秘钥和公钥<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;你注册github时的邮箱&quot;</span><br></pre></td></tr></table></figure><br><br>按三次回车就会生成 <code>.ssh</code> 文件夹，在 <code>c:\users\你的电脑用户名\.ssh</code> 里面<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519153155549.png" alt="在这里插入图片描述"> <code>id_rsa</code>是秘钥不能给别人看哦 <code>id_rsa.pub</code>是公钥是用来和你的私钥匹配的，一会需要使用的就是公钥<br></fancybox><br>我们用 <code>notepad++</code>之类的软件打开它，将里面的公钥全选复制<br><br>到github的个人setting中选择左边这个ssh<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519163955512.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>点击右侧new ssh key<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519154037774.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>点击 add ssh key<br><br>（5）回到git bash中将测试能否和github进行ssh连接<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure><br><br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519154555593.png" alt="在这里插入图片描述"><br></fancybox><br>提示连接成功<br><br>（6）修改配置 <code>_config.yml</code>，就是配置hexo的github地址,这样才能把我们的hexo部署到github上去<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519155033900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>用编辑器打开它，将你的github用户名粘贴上去，然后保存<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:你的github用户名/你的github用户名.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><br><br>这里repo可以写两种<br><br>第一种：<a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:你的github用户名/你的github用户名.github.io.git<br><br>第二种：<a href="https://github.com/你的github用户名/你的github用户名.github.io.git" target="_blank" rel="noopener">https://github.com/你的github用户名/你的github用户名.github.io.git</a><br><br>推荐第一种，我测试的时候用第二种每次 <code>hexo d</code> 的时候都要输入用户名密码，后来改成第一种就不需要重复输入了<br><br>（7）创建git部署命令，之后才能使用 <code>$ hexo deploy</code><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><br><br>（8）保存更新+部署<code>$ hexo g</code>(hexo generate) 和 <code>$ hexo d</code>(hexo deploy)二连<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><br><br><blockquote><p>tips：<br>1.每次修改本地文件，都需要命令<code>$ hexo generate</code>才能保存。而且每次使用命令都必须在博客根目录下使用。</p><p>2.如果你是windows用户，那么当你执行<code>$ hexo deploy</code>命令的时候，可能会先后出现提示框让你输入你的<strong>Github用户名</strong>和<strong>Github密码</strong>，只要输入正确，上传就没有问题。</p></blockquote><br><br>（9）访问<code>你的github用户名.github.io.git</code> 网址就是博客页面<br><br>#### 2.部署到coding<br><br>（1）注册coding账号<a href="https://coding.net/login" target="_blank" rel="noopener">https://coding.net/login</a><br><br>（2）新建项目<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519162328665.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br><strong>这里注意！！！！ 项目地址必须是你注册的用户名，前后对应的</strong><br><br>如果不这么写最后访问博客的时候资源会渲染失败<br><fancybox><br><img src="https://img-blog.csdnimg.cn/2019051916284518.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>（3）同样是将之前生成的 <code>id_rsa.pub</code>  文件中的ssh公钥复制出来<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519153155549.png" alt="在这里插入图片描述"><br></fancybox><br>（4）打开个人设置，添加公钥<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519163842697.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>（5）回到git bash中将测试能否和coding进行ssh连接<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@git.coding.net</span><br></pre></td></tr></table></figure><br><br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519164326528.png" alt="在这里插入图片描述"><br></fancybox><br>提示连接成功<br><br>（6）和上面一样修改配置 <code>_config.yml</code>添加coding的项目地址。这时有两个repo地址，用键值对形式<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: </span><br><span class="line">    github: git@github.com:你的github用户名/你的github用户名.github.io.git</span><br><span class="line">    coding: git@git.coding.net:你的github用户名/你的github用户名.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><br><br>（7）最后两条命令 保存，部署<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><br><br>（8）进入你的项目<br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519165240179.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox><br>部署成功后可以在代码浏览里面看到你的代码<br><br>点击代码下面有个page服务，一键开启这个服务<br><br>（9）开启后点击访问地址就能访问博客<br><br><fancybox><br><img src="https://img-blog.csdnimg.cn/20190519165522401.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxMzkyMjEzODUy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br></fancybox>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo博客 </tag>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
